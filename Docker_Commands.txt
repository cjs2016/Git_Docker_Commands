## Dockerfile ##
https://docs.docker.com/engine/reference/builder/

[ 예제 ]
FROM ubuntu:24.04    //베이스 이미지 지정
MAINTAINER obj2016 <obj2016@naver.com> 
ENV     //환경변수 설명
ADD ./entrypoint.sh  /entrypoint.sh    //파일 추가
RUN apt-get update
RUN apt-get install -y nginx
RUN echo "\ndaemon off;" >> /etc/nginx/nginx.conf  //쉘스크립트 또는 명령어
VOLUME ["/data","etc/nginx/site-enabled","/var/log/nginx"]   // 호스트와 공유할 경로의 목록 (docker run 명령의 "-v" 옵션으로도 설정가능)
WORKDIR /etc/nginx     //CMD에 설정한 실행 파일이 실행될 경로, 작업 위치 설정
CMD ["nginx"]  //컨테이너가 시작할 때 실행할 실행파일 또는 쉘 스크립트, 데몬 실행
ENTRYPOINT ["/entrypoint.sh"]    //데몬 실행
EXPOSE 8080    //호스트와 연결할 포트번호


//=> Dockerfile 작성 후 이미지 생성 명령어
docker build <옵션><Dockerfile 경로>

[ entrypoint.sh ]
#!/bin/bash
echo "The number of arguments:$#"
for val in $@
do
  echo $val
done

//=> $chmod +x entrypoint.sh    //생성 후 실행 권한 필요


## docker daemon
## docker0 (bridge)
## libcontainer
## cgroup

## namespaces

[ 구현 기술 ]
clone()  새로운 프로세스와 새로운 namespace 생성
unshare() 존재하는 프로세스에 새로운 namespace 생성
setns() 존재하는 namespace에 합류

Mount namespace
PID namespace
Network namespace 

[ 도커 이미지 관련 명령어 ]
docker search / https://hub.docker.com/search?q=    //도커 이미지 검색
docker image pull ubuntu:24.04    //도커 이미지 다운로드, tag - 버전
docker image ps / docker images   //도커 이미지 목록 확인
docker image inspect              //도커 이미지 상세정보 확인
docker image rm / docker rmi      //도커 이미지 삭제
docker image tag / docker tag     //도커 이미지 태그 설정
docker image push / docker push   //도커 이미지 업로드
docker image ls [option][repository]   //도커 이미지 목록 확인

[ 도커 컨테이너 관련 명령어 ]
docker container run / docker run      //컨테이너 실행
docker container ls / docker ps        //컨테이너 목록 확인
docker container start / docker start  //컨테이너 시작
docker container stop / docker stop    //컨테이너 정지
docker container restart / docker restart //컨테이너 재시작
docker container rm / docker rm           //컨테이너 삭제
docker container logs / docker logs       //컨테이너 로그 확인

docker run -it --rm -v ./config:/config ubuntu:24.04

[ Docker 이미지 생성 ]
//docker build 명령을 통해 Dockerfile 로 도커 이미지 생성
$docker build -t <생성할 이미지명>:<태그명><Dockerfile 위치>

$mkdir docker-practice/sample
$cd docker-practice/sample
$docker build -t ubuntu-text:v0.1  .   //마지막에 . 있음


[ Docker 이미지 업로드 - Docker Hub ]
$docker login
$docker push <사용자명>/ubuntu-test:v.0.1

##  docker-compose.yml  ##

[ 파일 예제 ]
[ docker-compose.yml ]
#주석
version:'3'

services:
  web:
    build: .
    ports:
    -"5000:5000"
    volumes:
    -.:/code
    -logvolume01:/var/log
    links:
    -redis
  db:


